CREATE USER 'geoapi'@'localhost' IDENTIFIED BY 'ga2010';

DROP DATABASE geoapi;

CREATE DATABASE geoapi;

GRANT ALL PRIVILEGES
ON geoapi.*
TO 'geoapi'@'localhost'
WITH GRANT OPTION;

GRANT ALL PRIVILEGES
ON geoapi.*
TO 'geoapi'@'%'
WITH GRANT OPTION;

USE geoapi;

CREATE TABLE apiuser (
	id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
	apikey VARCHAR(256),
	name VARCHAR(256),
	description VARCHAR(1024),
	UNIQUE (apikey)
) ENGINE=INNODB;

CREATE TABLE metric (
	command VARCHAR(2056),
	date VARCHAR(256),
	host VARCHAR(256),
	userid INT,
	FOREIGN KEY (userid) references apiuser(id) ON DELETE CASCADE
) ENGINE=INNODB;

CREATE TABLE senate (
	district VARCHAR(50),
	districturl VARCHAR(256),
	name VARCHAR(256),
	contact VARCHAR(256),
	url VARCHAR(256),
	imageurl VARCHAR(256),
	PRIMARY KEY(district)
) ENGINE=INNODB;

CREATE TABLE assembly (
	district VARCHAR(50),
	name VARCHAR(256),
	url VARCHAR(256),
	PRIMARY KEY(district)
) ENGINE=INNODB;

CREATE TABLE congressional (
	district VARCHAR(50),
	name VARCHAR(256),
	url VARCHAR(256),
	PRIMARY KEY(district)
) ENGINE=INNODB;